<div class="container" id="payment-container" data-order="<%= @order.id %>" data-user="<%= current_user.email %>">
  <%= form_tag new_order_payment_path, id: "payment-form", novalidate: 'novalidate' do |form| %>
  <div class="row">
    <div class="col">
      <h4 class="d-flex justify-content-center mt-5">
        <span>Your Order</span>
      </h4>
      <ul class="list-group mb-3">
        <% if @order.products.any? %>
        <li class="list-group-item d-flex justify-content-between lh-condensed bg-primary text-white">
          <h6>Products</h6>
        </li>
        <% @order.products.each do |product| %>
        <li class="list-group-item d-flex justify-content-between lh-condensed">
          <h6 class="my-0"><%= product.name %></h6>
          <span class="text-muted"><%= humanized_money_with_symbol product.price %></span>
        </li>
        <% end %>
        <% end %>
        <li class="list-group-item d-flex justify-content-between lh-condensed bg-primary text-white">
          <h6>Box</h6>
        </li>
        <li class="list-group-item d-flex justify-content-between lh-condensed">
          <h6 class="my-0"><%= @order.box.name %></h6>
          <span class="text-muted"><%= humanized_money_with_symbol @order.box.price %></span>
        </li>
        <li class="list-group-item d-flex justify-content-between lh-condensed bg-primary text-white">
          <h6 class="my-0">TOTAL (TRY)</h6>
          <h5 class="my-0"><%= humanized_money_with_symbol @order.amount %></h5>
        </li>
      </ul>
    </div>
  </div>
  <div class="group">
    <div class="row">
      <div class="col-12 col-lg-6 form-group">
        <input type="text" placeholder="Delivery address" class="form-control" id="delivery_address" required>
        <div class="invalid-feedback">
          Please provide a valid address.
        </div>
      </div>
      <div class="col-12 col-lg-6 form-group">
        <input type="text" placeholder="Phone number" class="form-control" id="delivery_contact_number" required>
        <div class="invalid-feedback">
          Please provide a valid phone number.
        </div>
      </div>
    </div>
    <div class="row w-100">
      <div id="card-element" class="col-8 align-items-center field w-100 mb-3 pt-2"></div>
      <div class="col-4 d-flex justify-content-end">
        <button class='subscription-button btn-rounded-primary border-0 d-flex justify-content-between align-items-center'>
          Place your order
          <div id="payment-spinner" class="spinner-border spinner-border-sm text-light ml-2 d-none" role="status">
            <span class="sr-only">Loading...</span>
          </div>
        </button>
      </div>
    </div>
  </div>
  <div class="outcome">
    <div id="card-errors" role="alert"></div>
  </div>
  <% end %>
</div>
